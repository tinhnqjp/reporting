<form name="vm.modalInternalForm" ng-submit="confirmInternal(vm.modalInternalForm.$valid)" novalidate>
  <div class="modal-header-confirm">
    <div class="row pdn">
      <div class="col-xs-6 text-left">
        <h4>内機</h4>
      </div>
      <div class="col-xs-6 text-right">
        <button class="btn btn-warning btn-sm" type="button" ng-click="closeThisDialog()">キャンセル</button>
        <button class="btn btn-primary btn-sm" type="submit">完了</button>
      </div>
    </div>
  </div>
  <div class="modal-body">
    <div class="panel panel-primary">
      <div class="panel-heading">内機情報</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <table class="table table-detail">
            <tbody>
              <tr>
                <th class="col-xs-2">
                  写真撮影機器
                </th>
                <td class="col-xs-10" colspan="3">
                  <div class="col-xs-3">
                    <div class="box-part text-center label-success" ng-repeat="item in pic_taps" ng-if="internal.has_picture == item.id"
                      ng-click="tapTwo(item.id, 'has_picture')">
                      <div class="title">
                        <span></span>
                      </div>
                      <span class="taps">{{item.value}}</span>
                    </div>
                  </div>
                </td>
              </tr>
              <tr>
                <th class="col-xs-2">
                  管理No<span class="text-red">*</span>
                </th>
                <td class="col-xs-10" colspan="3">
                  <input type="number" name="number" class="form-control" ng-model="internal.number" placeholder="管理Noを入力"
                    ng-disabled="block_number" ng-change="handlerNumberInternal(internal.number)" min="1" max="9999"
                    autocomplete="off" required>
                </td>
              </tr>
              <tr>
                <th class="col-xs-2">
                  メーカー
                </th>
                <td class="col-xs-4">
                  <input type="text" class="form-control" ng-model="internal.maker" placeholder="メーカーを入力" ng-click="modalMaker(internal.maker)">
                </td>
                <th class="col-xs-2">
                  タイプ
                </th>
                <td class="col-xs-4">
                  <input type="text" class="form-control" ng-model="internal.type" placeholder="タイプを入力" ng-click="modalType(internal.type)">
                </td>
              </tr>
              <tr>
                <th class="col-xs-2">
                  機器型式
                </th>
                <td class="col-xs-4">
                  <input type="text" class="form-control" ng-model="internal.model" placeholder="機器型式を入力" maxlength="13">
                </td>
                <th class="col-xs-2">
                  製造番号
                </th>
                <td class="col-xs-4">
                  <input type="text" class="form-control" ng-model="internal.serial" placeholder="製造番号を入力" maxlength="12">
                </td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">作業箇所</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.drain_pump == item.id"
              ng-click="tapThree(item.id, 'drain_pump')">
              <div class="title">
                <span>ドレンポンプ</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.hose == item.id"
              ng-click="tapThree(item.id, 'hose')">
              <div class="title">
                <span>ホース内</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.heat_exchanger == item.id"
              ng-click="tapThree(item.id, 'heat_exchanger')">
              <div class="title">
                <span>熱交換器</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.drain_pan == item.id"
              ng-click="tapThree(item.id, 'drain_pan')">
              <div class="title">
                <span>ドレンパン</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.grill == item.id"
              ng-click="tapThree(item.id, 'grill')">
              <div class="title">
                <span>グリル</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-success" ng-repeat="item in three_taps" ng-if="internal.filter == item.id"
              ng-click="tapThree(item.id, 'filter')">
              <div class="title">
                <span>フィルター</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">作業前</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <div class="col-xs-4">
            <div class="box-part text-center label-info" ng-repeat="item in four_taps" ng-if="internal.before_confirmed == item.id"
              ng-click="tapFour(item.id, 'before_confirmed')">
              <div class="title">
                <span>動作確認</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-4">
            <div class="box-part text-center label-info" ng-repeat="item in two_taps" ng-if="internal.damage == item.id"
              ng-click="tapTwo(item.id, 'damage')">
              <div class="title">
                <span>破損確認</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-primary">
      <div class="panel-heading">作業後</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <div class="col-xs-3">
            <div class="box-part text-center label-info" ng-repeat="item in four_taps" ng-if="internal.drainage == item.id"
              ng-click="tapFour(item.id, 'drainage')">
              <div class="title">
                <span>排水確認</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-3">
            <div class="box-part text-center label-info" ng-repeat="item in four_taps" ng-if="internal.noise_and_vibration == item.id"
              ng-click="tapFour(item.id, 'noise_and_vibration')">
              <div class="title">
                <span>異音・振動</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-3">
            <div class="box-part text-center label-info" ng-repeat="item in four_taps" ng-if="internal.after_confirmed == item.id"
              ng-click="tapFour(item.id, 'after_confirmed')">
              <div class="title">
                <span>動作確認</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
          <div class="col-xs-3">
            <div class="box-part text-center label-info" ng-repeat="item in type_taps" ng-if="internal.measure === item.id"
              ng-click="tapTwo(item.id, 'measure')">
              <div class="title">
                <span>測定（冷暖）</span>
              </div>
              <span class="taps">{{item.value}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">温度</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <div class="col-xs-6">
            <div class="panel panel-success">
              <div class="panel-heading">作業前</div>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-detail">
                    <tbody>
                      <tr>
                        <th class="col-xs-4">
                          吸込
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="temp_before_suction"
                            input-float="" max-integer="2" max-decimal="1" has-negative="true" placeholder="吸込を入力"
                            ng-model="internal.temp_before_suction" ng-change="changeTempBefore()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          吹出
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="temp_before_blow"
                            input-float="" max-integer="2" max-decimal="1" has-negative="true" ng-model="internal.temp_before_blow"
                            placeholder="吹出を入力" ng-change="changeTempBefore()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          差
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" disabled name="temp_before_diff"
                            ng-model="internal.temp_before_diff" placeholder="差を入力">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="panel panel-success">
              <div class="panel-heading">作業後</div>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-detail">
                    <tbody>
                      <tr>
                        <th class="col-xs-4">
                          吸込
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="temp_after_suction"
                            input-float="" max-integer="2" max-decimal="1" has-negative="true" ng-model="internal.temp_after_suction"
                            placeholder="吸込を入力" ng-change="changeTempAfter()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          吹出
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="temp_after_blow" input-float=""
                            max-integer="2" max-decimal="1" has-negative="true" ng-model="internal.temp_after_blow"
                            placeholder="吹出を入力" ng-change="changeTempAfter()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          差
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" disabled name="temp_after_diff"
                            ng-model="internal.temp_after_diff" placeholder="差を入力">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">風速</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <div class="col-xs-6">
            <div class="panel panel-default">
              <div class="panel-heading">吸込</div>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-detail">
                    <tbody>
                      <tr>
                        <th class="col-xs-4">
                          前
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="wind_suction_before"
                            input-float="" max-integer="2" max-decimal="1" has-negative="false" ng-model="internal.wind_suction_before"
                            placeholder="吸込を入力" ng-change="changeWindBefore()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          後
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="wind_suction_after"
                            input-float="" max-integer="2" max-decimal="1" has-negative="false" ng-model="internal.wind_suction_after"
                            placeholder="吹出を入力" ng-change="changeWindBefore()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          差
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" disabled name="wind_suction_diff"
                            ng-model="internal.wind_suction_diff" placeholder="差を入力">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xs-6">
            <div class="panel panel-default">
              <div class="panel-heading">吹出</div>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-detail">
                    <tbody>
                      <tr>
                        <th class="col-xs-4">
                          前
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="wind_blow_before"
                            input-float="" max-integer="2" max-decimal="1" has-negative="false" ng-model="internal.wind_blow_before"
                            placeholder="吸込を入力" ng-change="changeWindAfter()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          後
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" name="wind_blow_after" input-float=""
                            max-integer="2" max-decimal="1" has-negative="false" ng-model="internal.wind_blow_after"
                            placeholder="吹出を入力" ng-change="changeWindAfter()">
                        </td>
                      </tr>
                      <tr>
                        <th class="col-xs-4">
                          差
                        </th>
                        <td class="col-xs-8">
                          <input type="text" class="form-control" autocomplete="off" disabled name="wind_blow_diff"
                            ng-model="internal.wind_blow_diff" placeholder="差を入力">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">その他</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <table class="table table-detail">
            <tbody>
              <tr>
                <th class="col-xs-2">
                  組立者
                </th>
                <td class="col-xs-4">
                  <ui-select name="manager" ng-model="internal.assembler" theme="bootstrap">
                    <ui-select-match placeholder="組立者を選択">{{$select.selected.name}}</ui-select-match>
                    <ui-select-choices repeat="item.name as item in vm.report.workers | filter: $select.search">
                      <span ng-bind-html="item.name | highlight: $select.search"></span>
                    </ui-select-choices>
                  </ui-select>
                </td>
                <th class="col-xs-2">
                  外装パネル型式
                </th>
                <td class="col-xs-4">
                  <input type="text" class="form-control" ng-model="internal.exterior_type" placeholder="外装パネル型式を入力"
                    maxlength="14">
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">指摘事項</div>
      <div class="panel-body">
        <div class="table-custom" style="border:0px;">
          <table class="table table-detail">
            <tbody>
              <tr>
                <th class="col-xs-2">
                  指摘事項
                </th>
                <td class="col-xs-10" colspan="3">
                  <textarea class="form-control" rows="5" ng-model="internal.description" ng-click="modalDescription(internal.description)"
                    placeholder="指摘事項を入力"></textarea>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div ng-if="isSaveClick">
      <div ng-messages="vm.modalInternalForm.number.$error" role="alert">
        <li class="text-red" ng-message="required">管理Noを入力してください。</li>
        <li class="text-red" ng-message="min">管理Noはを1以上を入力してください。</li>
        <li class="text-red" ng-message="max">管理Noはを9999以下を入力してください。</li>
        <li class="text-red" ng-message="dupl">管理Noが重複しています</li>
      </div>
      <div ng-messages="vm.modalInternalForm.wokername.$error" role="alert">
        <li class="text-red" ng-message="required">氏名を入力してください。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.work_start.$error" role="alert">
        <li class="text-red" ng-message="datetime">開始時間の入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.work_end.$error" role="alert">
        <li class="text-red" ng-message="datetime">終了時間の入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.temp_before_suction.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">温度の作業前の吸込の[-xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.temp_before_blow.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">温度の作業前の吹出の[-xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.temp_after_suction.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">温度の作業後の吸込の[-xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.temp_after_blow.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">温度の作業後の吹出の[-xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.wind_suction_before.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">風速の作業前の吸込の[xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.wind_suction_after.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">風速の作業前の吹出の[xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.wind_blow_before.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">風速の作業後の吸込の[xx.x]入力形式に誤りがあります。</li>
      </div>
      <div ng-messages="vm.modalInternalForm.wind_blow_after.$error" role="alert">
        <li class="text-red" ng-message="inputFloat">風速の作業後の吹出の[xx.x]入力形式に誤りがあります。</li>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-warning" type="button" ng-click="closeThisDialog()">キャンセル</button>
    <button class="btn btn-primary" type="submit">完了</button>
  </div>
</form>
